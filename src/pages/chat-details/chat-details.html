<!--
  Generated template for the ChatDetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{receiver.prenoms}}</ion-title>
  </ion-navbar>

</ion-header>





<ion-content>


    <div #scrollMe id="messages-container" style="overflow: auto; height: 100%;">
        
        <ion-list >
            <div class="text cards-job" *ngFor="let message of conversationReference | async ">

                <ion-row>
                    <ion-col style="padding-top : 20px" col-2 *ngIf="message.recepteurId === sender.id">
                                <!-- item 1 -->
                                <ion-avatar item-left>                        
                                        <img src="{{message.photoDeProfil}}" style="border-radius: 50%;width: 50px;height: 50px; ">
                                </ion-avatar>
                    </ion-col>         
                    

                    <ion-col col-10>
                            <!-- item 2 -->
                            <ion-card style="border-radius : 25px;" >

                                
                            <ion-card-content [ngStyle]="{'background-color':message.recepteurId === sender.id ? 'lightgrey' : 'powderblue' }">
                                    <p>{{message.message}}</p>
                            </ion-card-content>
                            </ion-card> 

                            <a class="item item-icon-right" style="text-align: end;" *ngIf="message.etat === 'lu' && message.recepteurId === receiver.id">
                                <ion-icon  name="ios-done-all" ></ion-icon>                                    
                            </a>
                            <a class="item item-icon-right" style="text-align: end;" *ngIf="message.etat === 'envoyÃ©' && message.recepteurId === receiver.id">
                                <ion-icon  name="ios-checkmark" ></ion-icon>                                    
                            </a>
                            
                    </ion-col>


                    <ion-col style="padding-top : 15px" col-2 *ngIf="message.recepteurId === receiver.id">
                            <!-- item 1 -->
                            <ion-avatar item-left>                        
                                    <img src="{{message.photoDeProfil}}" style="border-radius: 50%;width: 50px;height: 50px; ">
                            </ion-avatar>
                     </ion-col>  
                     
                     
   

                </ion-row>
            </div>
        </ion-list>
    </div>   
    
</ion-content>

<ion-footer>
    <ion-toolbar>
        <ion-input type="text" placeholder="message..." [(ngModel)]="textToPublish" (ngModelChange)="tagMessages('clavier')"></ion-input>


        <ion-buttons end>
            <button (click)="sendMessage()">
            <ion-icon name="md-send" style="font-size : x-large;"></ion-icon>
          </button>
        </ion-buttons>
        
    </ion-toolbar>


</ion-footer>



